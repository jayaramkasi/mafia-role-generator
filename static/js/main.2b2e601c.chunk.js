(this["webpackJsonpmafia-role-generator"]=this["webpackJsonpmafia-role-generator"]||[]).push([[0],{24:function(e){e.exports=JSON.parse('{"kamikaze":{"type":"M","description":"Also called suicide-bomber. During voting round, kamikaze can kill themselves and take down another person with them. If another person is voted out, 3 people die. - bomber, target, 3rd person","player":"During the day, announce yourself as bomber and tell who is the target","narrator":""},"framer":{"type":"M","description":"[MAFIA] Also called forger. Assigns a person to be framed that night. If cop checks that person, narrator is supposed to say Mafia. ","player":"At night, Tell who to frame","narrator":"During night, ask who to frame and note down. If cop asks about that person, say Mafia"},"silencer":{"type":"M","description":"[MAFIA] Assigns a person to be silenced during the day.","player":"At night, tell who to silence","narrator":"During night, ask who to silence and note down. During the day, announce who is silenced. If Doc visited that person, silencing doesn\'t work"},"godfather":{"type":"M","description":"[MAFIA] If cop checks this person, Narrator has to say Villager.","player":"Behave like normal mafia. But be aware that cop check on you will show villager","narrator":"If cop asks about Godfather, say Villager"},"mafia":{"type":"M","description":"[MAFIA] Generic mafia ","player":"Generic mafia role","narrator":""},"idiot":{"type":"N","description":"[NEUTRAL] Wins if voted out during the day. Loses if survives or killed by Mafia, or mafia win. ","player":"Try to get voted out during the day","narrator":"Announce if killed during the night"},"deputy":{"type":"V","description":"[VILLAGE] Arrests someone during the night. They cannot vote next day, but can participate in discussion.","player":"During night, tell who to arrest","narrator":"Note down who is under arrest at night"},"granny":{"type":"V","description":"[VILLAGE] Anyone who points to granny at night dies. If Mafia points, closest mafia dies. ","player":"","narrator":"At the end of night round, check who all have visited granny. Everyone dies. If mafia tries to kill granny at night, kill the closest mafia"},"creep":{"type":"V","description":"[VILLAGE] Can check one person, and know the closest person who visited them that night. Must be the last role checked during the night. ","player":"During night, tell a person to stalk. You\'ll know 1 or each person who visited them. ","narrator":"during night round, ask about this role last."},"gravedigger":{"type":"V","description":"[VILLAGE] Can speak to dead people and revive them at night, but have to sacrifice themselves. ","player":"During night, tell which dead person is to be revived","narrator":"During night, ask who is to be revived. If killed during the same night, revival doesn\'t count"},"sniper":{"type":"V","description":"[VILLAGE] Can kill a person during the night. Sided with village ","player":"During night, tell who is to be sniped","narrator":"If snipe is on granny, kill sniper. or kill person, unless saved by the doc."},"bulletproof":{"type":"V","description":"[VILLAGE] Has two lives if Mafia or kamikaze kill. Dies if voted out","player":"","narrator":"Check if person who is dying at night/Kamikaze tells is bulletproof. "},"doc":{"type":"V","description":"[VILLAGE] Can save a person at night (including themselves). Killed if tries to save granny.","player":"During night, ask who is to be saved.","narrator":"Check if person dying(killed by mafia/sniper) is saved by the doc. Check if doc is visiting granny."},"cop":{"type":"V","description":"[VILLAGE] Investigates a person, and narrator tells mafia/village according to role, unless Framed/Godfather. Dies at night if they visit Granny ","player":"At night, ask who to investigate","narrator":"Mafia if the person is mafia/framed by framer. Villager if Godfather/otherwise"},"twins":{"type":"V","description":"[VILLAGE] Also called Freemasons/Masons. Knows few other villagers. ","player":"","narrator":""},"villager":{"type":"V","description":"[VILLAGE] Generic villager role","player":"","narrator":""}}')},71:function(e,t,a){e.exports=a(88)},80:function(e,t,a){},81:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),o=a.n(l),i=a(12),c=(a(79),a(80),a(23)),s=a(7),m=(a(81),a(38)),p=a(27),u=a(36),d=a(8),h="UPDATE_MAFIA_ROLES",g="UPDATE_VILLAGE_ROLES",f="UPDATE_PLAYER_NAMES",y="UPDATE_ALLOCATION",E="UPDATE_PLAYER_CHANNELS",b="SHOW_ALERT",v="HIDE_ALERT",w="SHOW_TOAST",k="HIDE_TOAST",x=function(e){return{type:h,payload:{mafiaRoles:e}}},O=function(e){return{type:g,payload:{villageRoles:e}}},j=function(e){return{type:f,payload:{playerNames:e}}},A=function(e){return{type:y,payload:{allocation:e}}},I=function(e,t){return{type:b,payload:{alert:{show:!0,header:t,body:e}}}},N=a(16),R=a(21),L=a(20),C=a(14),M=a(9),T=a(35),D=a(32),V=a(24);var G=Object(s.g)((function(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.mafiaRoles})),n=Object(i.c)((function(e){return e.villageRoles})),l=Object.values(a).reduce((function(e,t){return e+t}),0),o=Object.values(n).reduce((function(e,t){return e+t}),0),c=Object(i.c)((function(e){return e.playerNames})),s=l+o,h=new Array(s).fill(0),g=Object(d.a)(Object(d.a)({},a),n),f=Object.entries(g).filter((function(e){return Object(u.a)(e,2)[1]>0})).reduce((function(e,t){for(var a=Object(u.a)(t,2),n=a[0],r=a[1],l=0;l<r;l++)e.push(n);return e}),[]),y=Object(p.a)(new Set(f)),E=function(e,a){return Object.entries(e).map((function(n){var l=Object(u.a)(n,2),o=l[0],i=l[1];return r.a.createElement(L.a,{key:o,style:{borderBottom:"1px dashed #000000"}},r.a.createElement(C.a,null,r.a.createElement(M.a,{style:{cursor:"pointer"},onClick:function(){var e=V[o],a=e.type,n=e.description,l=e.player,i=e.narrator;t(I(r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Type: ",a," "),r.a.createElement("p",null,"Description: ",n),r.a.createElement("p",null,"Player notes: ",l),r.a.createElement("p",null,"Narrator notes: ",i)),!0,"Role : ".concat(o)))}},o),r.a.createElement(M.a,{className:"d-flex justify-content-end"},r.a.createElement(R.a,{style:{width:"20px",margin:"4px 0px 4px 16px",color:0===i?"#a3a3a3":"inherit"},icon:"twins"===o&&2===i?N.a:N.e,onClick:function(){0!==i&&t(a(Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},o,i-("twins"===o&&2===i?2:1)))))}}),r.a.createElement("span",{style:{textAlign:"center",width:"20px",margin:"4px 0px 4px 16px",color:0===i?"inherit":"#FF0000"}},i),r.a.createElement(R.a,{style:{width:"20px",margin:"4px 0px 4px 16px"},icon:"twins"===o&&0===i?N.b:N.g,onClick:function(){t(a(Object(d.a)(Object(d.a)({},e),{},Object(m.a)({},o,i+("twins"===o&&0===i?2:1)))))}}))))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{style:{width:"100%"},className:"d-flex justify-content-end"}),r.a.createElement(C.a,null,r.a.createElement(M.a,{sm:4},r.a.createElement("h1",null,"Roles"),r.a.createElement("p",null,"Click on individual roles to popup details"),r.a.createElement("h3",null,"Mafia roles (",l,")"),E(a,x),r.a.createElement("h3",{style:{marginTop:"20px"}},"Village roles (",o,")"),E(n,O)),r.a.createElement(M.a,{sm:4},r.a.createElement("h1",{style:{marginBottom:"30px"}},"People (",s,")"),r.a.createElement(T.a,null,h.map((function(e,a){return r.a.createElement(T.a.Control,{key:a,required:!0,size:"lg",type:"text",style:{marginTop:"20px"},placeholder:"Enter name for player ".concat(a+1),value:c[a]?c[a].name:"",onChange:function(e){t(j([].concat(Object(p.a)(c.slice(0,a)),[Object(d.a)(Object(d.a)({},c[a]),{},{name:e.target.value})],Object(p.a)(c.slice(a+1)))))}})})),r.a.createElement(D.a,{type:"submit",onClick:function(a){if(a.preventDefault(),c.length!==s)t(I("Enter all player names or remove roles","Error"));else if(s<5)t(I("Need minimum of 5 players.","Error"));else if(0===s)t(I("Add some roles","Error"));else{for(var n=function(e){var t,a,n;for(n=e.length-1;n>0;n--)t=~~(Math.random()*(n+1)),a=e[n],e[n]=e[t],e[t]=a;return e}(f),r=[],l=0;l<s;l++){var o=n.length,i=~~(Math.random()*o),m=n[i];r.push({alive:!0,allotedRole:m,type:V[m].type}),n.splice(i,1)}t(A(r)),e.history.push("/game")}},style:{marginTop:"20px",width:"100%"}},"Allocate!"),r.a.createElement(D.a,{style:{marginTop:"20px",width:"100%"},variant:"outline-primary",onClick:function(){e.history.push("/game")}},"Current game"))),r.a.createElement(M.a,{sm:4},r.a.createElement("span",null,r.a.createElement("h1",null,"Narrator notes ")),y.filter((function(e){return""!==V[e].narrator})).map((function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("strong",null,e," ")," -",V[e].narrator)})))))})),F=a(67),S=a.n(F),P=a(69),_=a(59);function H(e){var t=Object(s.f)(),a=Object(i.b)(),n=Object(i.c)((function(e){return e.playerNames})),l=Object(i.c)((function(e){return e.allocation})),o=l.filter((function(e){return e.alive})),c=o.filter((function(e){return"M"===e.type})).length,m=o.filter((function(e){return"M"!==e.type||"idiot"===e.allotedRole})).length,u=o.filter((function(e){return"idiot"===e.allotedRole})).length>0;return r.a.createElement(L.a,null,r.a.createElement(C.a,{style:{width:"100%"},className:"d-flex justify-content-start"},r.a.createElement(M.a,{className:"d-flex justify-content-start align-items-center",sm:1},r.a.createElement(D.a,{variant:"light",onClick:function(){t.push("/")}},r.a.createElement(R.a,{icon:N.f,size:"2x",style:{marginRight:"16px"}}))),r.a.createElement(M.a,{className:"d-flex justify-content-start align-items-center"},r.a.createElement("h1",null,"Allocation"))),r.a.createElement(M.a,null,r.a.createElement(C.a,null,r.a.createElement(M.a,{sm:2},"Game status"),r.a.createElement(M.a,{sm:2,className:""},"Mafia ",r.a.createElement("span",{style:{color:"red"}},c)),r.a.createElement(M.a,{sm:2},"Villagers ",r.a.createElement("span",{style:{color:"green"}},m)),r.a.createElement(M.a,{sm:2},u&&"Idiot is active"),r.a.createElement(M.a,{sm:4},r.a.createElement("strong",null,0===c&&0===m?"Start a game first":c>=m?r.a.createElement("span",{style:{backgroundColor:"red",padding:"5px",color:"white"}},"Mafia wins!"):m>0&&0===c&&r.a.createElement("span",{style:{backgroundColor:"green",padding:"5px",color:"white"}},"Village wins")))),r.a.createElement(C.a,{className:"justify-content-end"},r.a.createElement(M.a,{sm:3,style:{textAlign:"center"}},r.a.createElement("strong",null,"Notes, name")),r.a.createElement(M.a,{sm:9,style:{textAlign:"center"}},r.a.createElement("strong",null,"Webhook"))),l.map((function(e,t){return r.a.createElement(C.a,{key:t,className:"justify-content-end",style:{margin:"16px",textDecoration:e.alive||"line-through"}},r.a.createElement(M.a,{sm:3,className:"d-flex align-items-center justify-content-between"},r.a.createElement(T.a.Control,{style:{width:"100px"}}),r.a.createElement("span",{style:{color:"godfather"===e.allotedRole?"#FF9800":"M"===e.type?"#FF0000":"inherit"}},n[t].name," - ",e.allotedRole)),r.a.createElement(M.a,{sm:9,className:"d-flex align-items-center justify-content-start"},r.a.createElement(_.a,{className:"align-items-center",style:{margin:"0px 16px",maxWidth:"90%"}},r.a.createElement(_.a.Prepend,{className:"justify-content-center"},r.a.createElement(D.a,{variant:e.alive?"success":"danger",onClick:function(){a(A([].concat(Object(p.a)(l.slice(0,t)),[Object(d.a)(Object(d.a)({},e),{},{alive:!e.alive})],Object(p.a)(l.slice(t+1)))))}},e.alive?"Alive":"Dead",r.a.createElement(R.a,{style:{marginLeft:"16px",cursor:"pointer"},icon:e.alive?N.d:N.c}))),r.a.createElement(T.a.Control,{value:n[t].hook||"",placeholder:"Hook for ".concat(n[t].name),onChange:function(e){a(j([].concat(Object(p.a)(n.slice(0,t)),[Object(d.a)(Object(d.a)({},n[t]),{},{hook:e.target.value})],Object(p.a)(n.slice(t+1)))))}}),r.a.createElement(_.a.Append,null,r.a.createElement(D.a,{disabled:(o=n[t].hook,!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(o)),onClick:Object(P.a)(S.a.mark((function r(){var o;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=[],"twins"===e.allotedRole?o=l.map((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{index:t})})).filter((function(e){return"twins"===e.allotedRole})):"M"===e.type&&(o=l.map((function(e,t){return Object(d.a)(Object(d.a)({},e),{},{index:t})})).filter((function(e){return"M"===e.type}))),!n[t].hook){r.next=5;break}return r.next=5,fetch(n[t].hook,{method:"POST",body:JSON.stringify({text:"*Your Role: ".concat(e.allotedRole,".* \nNote: ").concat(V[e.allotedRole].player,". ").concat(o.length>0&&("twins"===e.allotedRole||"M"===e.type||"cop"===e.allotedRole)?"\nYour known teammates: ".concat(o.map((function(e){return"\n".concat(n[e.index].name," : ").concat(e.allotedRole)})).join("")):"","\n                      ")})}).then((function(r){var l;a((l="Alerted ".concat(n[t].name," - ").concat(e.allotedRole),{type:w,payload:{toast:{show:!0,header:l,body:!1}}}))}));case 5:case"end":return r.stop()}}),r)})))},r.a.createElement(R.a,{icon:N.i,style:{cursor:"pointer"}}))))));var o}))))}var z=a(31);function B(e){return r.a.createElement(L.a,null,Object.entries(V).map((function(e){var t=Object(u.a)(e,2);return function(e,t){return r.a.createElement(C.a,{key:e},r.a.createElement(z.a,{style:{margin:"5px",width:"100%"}},r.a.createElement(z.a.Header,null,e),r.a.createElement(z.a.Body,null,r.a.createElement(z.a.Title,null,"Team: ",t.type),r.a.createElement(z.a.Text,null,"Description: ",t.description),r.a.createElement(z.a.Text,null,"Player note: ",t.player),r.a.createElement(z.a.Text,null,"Narrator note: ",t.narrator))))}(t[0],t[1])})))}var U=Object(s.g)((function(e){return r.a.createElement(L.a,{style:{padding:"15px",maxWidth:"100%"}},r.a.createElement("h1",null,"How to use this app"),r.a.createElement("div",null,"The app was built targetting gamemasters of"," ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Mafia_(party_game)"},"Mafia (party game)"),", a social deduction game."),r.a.createElement("br",null),r.a.createElement("div",null,"1. Before the game starts, go to ",r.a.createElement("a",{href:"/"},"Design Page")," and choose the number of roles of each faction, according to your game design."),r.a.createElement("br",null),r.a.createElement("p",null,"2. Click the names of the players in the inputs provided, and click allocate."),r.a.createElement("br",null),r.a.createElement("p",null,"3. You'll be taken to the Game management screen where the player's names and alloted roles will be available."),r.a.createElement("br",null),r.a.createElement("div",null,"4. Either ",r.a.createElement("br",null),"a. Ping each member of the group their role, and start the game!",r.a.createElement("br",null),"OR",r.a.createElement("br",null),"b. In case you have webhooks for each person created (slack or Google Chat or any custom), you can make an optional POST call to a URL that you specify.",r.a.createElement("br",null),"Click here to learn how to create webhooks for"," ",r.a.createElement("a",{href:"https://slack.com/intl/en-in/help/articles/115005265063-Incoming-webhooks-for-Slack"},"Slack")," ","and"," ",r.a.createElement("a",{href:"https://developers.google.com/chat/how-tos/webhooks"},"Google Chat"),".",r.a.createElement("br",null),r.a.createElement("br",null),"You can alternatively write your own implementation to alert a person of their role. ",r.a.createElement("br",null)," Your API must be prepared to accept the call as detailed below.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{style:{backgroundColor:"lightgrey",padding:"10px 30px",borderRadius:"5px"}},"url: ",r.a.createElement("i",null,"URL to be called")," ",r.a.createElement("br",null),"Method: POST ",r.a.createElement("br",null),"Headers: ","{ Content-Type: `application/json` }",r.a.createElement("br",null)," body:"," \n { \n text: `${ROLE AND DESCRIPTION} ` }")))})),W=a(44),Y=a(61),J=Object(s.g)((function(e){return r.a.createElement(W.a,{fixed:"top",collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",style:{padding:"0px 20px"}},r.a.createElement(W.a.Brand,null,r.a.createElement(c.b,{to:"/"},"Mafia role allocator")),r.a.createElement(W.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(W.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(Y.a,{className:"mr-auto",activeKey:"/"},r.a.createElement(Y.a.Item,{className:"main-nav-item"},r.a.createElement(c.b,{to:"/howtoplay"},r.a.createElement(R.a,{icon:N.h,className:"nav-item-icon"}),"How to play")),r.a.createElement(Y.a.Item,{className:"main-nav-item"},r.a.createElement(c.b,{to:"/roles"},r.a.createElement(R.a,{icon:N.j,className:"nav-item-icon"}),"Roles")))))})),K=a(60);function $(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.alert})),n=a.show,l=a.header,o=a.body;return r.a.createElement(K.a,{show:n,onHide:function(){return t({type:v,payload:{alert:{show:!1,header:"",body:""}}})}},r.a.createElement(K.a.Header,{closeButton:!0},l),r.a.createElement(K.a.Body,null,o))}var q=a(62);function Q(e){var t=Object(i.b)(),a=Object(i.c)((function(e){return e.toast})),n=a.show,l=a.header,o=a.body;return r.a.createElement(q.a,{style:{position:"absolute",top:70,right:20},autohide:!0,show:n,delay:5e3,onClose:function(){t({type:k,payload:{toast:{show:!1,header:"",body:""}}})}},r.a.createElement(q.a.Header,null,l),r.a.createElement(q.a.Body,null,o))}var X=function(){return r.a.createElement(c.a,{basename:"/"},r.a.createElement(L.a,{fluid:!0,style:{marginTop:"60px",padding:"0px 10px 0px 20px",minHeight:"100%"}},r.a.createElement(J,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/roles",component:B}),r.a.createElement(s.a,{exact:!0,path:"/game",component:H}),r.a.createElement(s.a,{exact:!0,path:"/howtoplay",component:U}),r.a.createElement(s.a,{exact:!0,path:"/*",component:G})),r.a.createElement(C.a,{style:{padding:"15px",backgroundColor:"#000000",color:"#FFFFFF",bottom:"0"}},r.a.createElement("p",null,"Built with React. "))),r.a.createElement($,null),r.a.createElement(Q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(70),ee={mafiaRoles:{kamikaze:0,framer:0,silencer:0,godfather:0,mafia:1},villageRoles:{idiot:0,deputy:0,granny:0,creep:0,gravedigger:0,sniper:0,bulletproof:0,doc:1,cop:1,villager:1,twins:0},playerNames:[],allocation:[],alert:{show:!1,header:"",body:""},toast:{variant:"success",show:!1,header:"",body:""}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;return[h,f,g,y,E,b,v,w,k].includes(t.type)?Object(d.a)(Object(d.a)({},e),t.payload):e},ae=Object(Z.a)(te);o.a.render(r.a.createElement(i.a,{store:ae},r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[71,1,2]]]);
//# sourceMappingURL=main.2b2e601c.chunk.js.map